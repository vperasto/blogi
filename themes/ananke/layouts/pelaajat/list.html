{{ define "main" }}
  <div class="pa3 pa4-ns">
    <h1 class="f1 athelas tc">{{ .Title }}</h1>

    {{ $pelaajat := .Site.GetPage "section" "pelaajat" }}
    
    <!-- MÄÄRITTELE NYKYINEN KAUSI TÄSSÄ. HELPPO PÄIVITTÄÄ TULEVAISUUDESSA. -->
    {{ $nykyinen_kausi := "2024-2025" }}

    <!-- Nykyisen kauden pelaajat -->
    <section class="w-100 mw8 center">
      <h2 class="f2 b helveticas tc">Kausi {{ $nykyinen_kausi }}</h2>
      <div class="cf">
        {{/* Haetaan pelaajat, joiden kausi TÄSMÄÄ nykyiseen kauteen */}}
        {{ $nykyiset := where $pelaajat.Pages "Params.kausi" $nykyinen_kausi }}
        {{ range $nykyiset.ByParam "pelinumero" }}
          <div class="fl w-100 w-50-ns pa2">
            <article class="ba b--black-10">
              <div class="w-100 pa3">
                <a href="{{ .Permalink }}" class="db link dim">
                  <h3 class="f3 mb1">#{{ .Params.pelinumero }} {{ .Params.etunimi }} {{ .Params.sukunimi }}</h3>
                </a>
                <p class="f5 mb0">{{ .Params.pelipaikka }}</p>
              </div>
            </article>
          </div>
        {{ else }}
          <p class="tc">Ei pelaajia tällä kaudella.</p>
        {{ end }}
      </div>
    </section>

    <!-- Entiset pelaajat -->
    <section class="w-100 mw8 center mt4">
      <h2 class="f2 b helveticas tc">Aiemmat kaudet</h2>
      <div class="cf">
        {{/* TÄMÄ ON MUUTOS: Haetaan pelaajat, joiden kausi EI OLE SAMA KUIN nykyinen kausi */}}
        {{ $entiset := where $pelaajat.Pages "Params.kausi" "ne" $nykyinen_kausi }}
        {{ range $entiset.ByParam "sukunimi" }}
          <div class="fl w-100 w-50-ns pa2">
            <article class="ba b--black-10">
              <div class="w-100 pa3">
                <a href="{{ .Permalink }}" class="db link dim">
                  <h3 class="f3 mb1">{{ .Params.etunimi }} {{ .Params.sukunimi }}</h3>
                </a>
                <p class="f5 mb0">Kausi: {{ .Params.kausi }}</p>
              </div>
            </article>
          </div>
        {{ else }}
          <p class="tc">Ei aiempien kausien pelaajia listattuna.</p>
        {{ end }}
      </div>
    </section>
    
  </div>
{{ end }}